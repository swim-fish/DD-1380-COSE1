syntax = "proto3";

package tccc;
import "google/protobuf/timestamp.proto";

message Tourniquet {
  string type = 1;
  string time = 2;
}

message TcccCard {
  string version = 1;
  google.protobuf.Timestamp timestamp = 2;
  Patient patient = 3;
  Injury injury = 4;
  VitalSigns vitals = 5;
  Treatments treatments = 6;
  Evacuation evacuation = 7;
}

message Patient {
  string battle_roster = 1;
  string name = 2;
  string service_number = 3;
  BloodType blood_type = 4;
  string allergies = 5;
  string service = 6;
  string unit = 7;
}

message Injury {
  google.protobuf.Timestamp time = 1;
  Mechanism mechanism = 2;
  string description = 3;
  optional Tourniquet tq_r_arm = 4;
  optional Tourniquet tq_r_leg = 5;
  optional Tourniquet tq_l_arm = 6;
  optional Tourniquet tq_l_leg = 7;
}

message VitalSigns {
  optional int32 pulse = 1;
  // 將 blood_pressure 分為兩個欄位
  optional string blood_pressure_systolic = 2;  // 收縮壓
  optional string blood_pressure_diastolic = 3; // 舒張壓
  optional int32 resp_rate = 4;
  optional int32 spo2 = 5;
}


message Treatments {
  repeated string applied = 1; // 改為 string 以儲存 ID
  string other = 2;
}

message Evacuation {
  EvacPriority priority = 1;
  string medic_name = 2;
}

enum BloodType {
  BLOOD_TYPE_UNSPECIFIED = 0;
  A_POS = 1; A_NEG = 2; B_POS = 3; B_NEG = 4;
  AB_POS = 5; AB_NEG = 6; O_POS = 7; O_NEG = 8;
}

enum Mechanism {
  MECHANISM_UNSPECIFIED = 0;
  ARTILLERY = 1; BURN = 2; FALL = 3; GRENADE = 4; GSW = 5;
  IED = 6; LANDMINE = 7; MVC = 8; RPG = 9; OTHER = 10;
}

enum EvacPriority {
  EVAC_PRIORITY_UNSPECIFIED = 0; URGENT = 1; PRIORITY = 2; ROUTINE = 3;
}

