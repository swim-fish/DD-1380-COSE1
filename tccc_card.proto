syntax = "proto3";

package tccc;
import "google/protobuf/timestamp.proto";

// 單次止血帶應用紀錄
message Tourniquet {
  string type = 1;
  string time = 2;
}

// 單次生命徵象測量紀錄
message VitalSignRecord {
  string time = 1; // 測量時間 (HH:mm)
  optional int32 pulse = 2;
  optional int32 blood_pressure_systolic = 3;
  optional int32 blood_pressure_diastolic = 4;
  optional int32 resp_rate = 5;
  optional int32 spo2 = 6;
  optional AvpuLevel avpu = 7;
  optional int32 pain_scale = 8;
}

// 主 TCCC 卡片訊息
message TcccCard {
  string version = 1;
  google.protobuf.Timestamp timestamp = 2;
  Patient patient = 3;
  Injury injury = 4;
  repeated VitalSignRecord vitals_history = 5;
  Treatments treatments = 6;
  Evacuation evacuation = 7;
}

// 病患資訊
message Patient {
  string battle_roster = 1;
  string name = 2;
  string service_number = 3;
  BloodType blood_type = 4;
  string allergies = 5;
  string service = 6;
  string unit = 7;
}

// 傷勢資訊
message Injury {
  google.protobuf.Timestamp time = 1;
  Mechanism mechanism = 2;
  string description = 3;
  optional Tourniquet tq_r_arm = 4;
  optional Tourniquet tq_r_leg = 5;
  optional Tourniquet tq_l_arm = 6;
  optional Tourniquet tq_l_leg = 7;
  repeated string locations = 8; 
  optional int32 total_burn_percentage = 9;
  repeated string trauma_locations = 10;
}

// 治療措施
message Treatments {
  repeated string applied = 1;
  string other = 2;
}

// 後送資訊
message Evacuation {
  EvacPriority priority = 1;
  string medic_name = 2;
}

// --- 枚舉類型 ---
enum BloodType {
  BLOOD_TYPE_UNSPECIFIED = 0;
  A_POS = 1; A_NEG = 2; B_POS = 3; B_NEG = 4;
  AB_POS = 5; AB_NEG = 6; O_POS = 7; O_NEG = 8;
}

enum Mechanism {
  MECHANISM_UNSPECIFIED = 0;
  ARTILLERY = 1; BURN = 2; FALL = 3; GRENADE = 4; GSW = 5;
  IED = 6; LANDMINE = 7; MVC = 8; RPG = 9; OTHER = 10;
}

enum EvacPriority {
  EVAC_PRIORITY_UNSPECIFIED = 0; URGENT = 1; PRIORITY = 2; ROUTINE = 3;
}

enum AvpuLevel {
  AVPU_LEVEL_UNSPECIFIED = 0;
  ALERT = 1;
  VERBAL = 2;
  PAIN = 3;
  UNRESPONSIVE = 4;
}

