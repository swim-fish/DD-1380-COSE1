syntax = "proto3";

// 建議為您的 .proto 檔案定義一個 package，以避免命名衝突
package tccc;

// 主訊息，代表一張完整的 TCCC 卡片資料
message TcccCard {
  string version = 1;
  // 使用 Google 提供的標準 Timestamp 類型來表示時間
  google.protobuf.Timestamp timestamp = 2;
  Patient patient = 3;
  Injury injury = 4;
  VitalSigns vitals = 5;
  Treatments treatments = 6;
  Evacuation evacuation = 7;
}

// 病患基本資訊
message Patient {
  string battle_roster = 1;
  string name = 2;
  string service_number = 3;
  BloodType blood_type = 4;
  string allergies = 5;
  string service = 6; // 軍種
  string unit = 7;    // 單位
}

// 傷勢評估
message Injury {
  google.protobuf.Timestamp time = 1;
  Mechanism mechanism = 2;
  // repeated 關鍵字表示這是一個列表 (array)
  repeated InjuryLocation locations = 3;
  string description = 4;
}

// 生命徵象
message VitalSigns {
  optional int32 pulse = 1;
  optional string blood_pressure = 2;
  optional int32 resp_rate = 3;
  optional int32 spo2 = 4;
}

// 治療措施
message Treatments {
  repeated TreatmentType applied = 1;
  string other = 2;
}

// 後送資訊
message Evacuation {
  EvacPriority priority = 1;
  string medic_name = 2;
}

// --- 以下是枚舉 (Enum) 類型定義 ---

enum BloodType {
  BLOOD_TYPE_UNSPECIFIED = 0;
  A_POS = 1;
  A_NEG = 2;
  B_POS = 3;
  B_NEG = 4;
  AB_POS = 5;
  AB_NEG = 6;
  O_POS = 7;
  O_NEG = 8;
}

// START: 更新受傷機制枚舉
enum Mechanism {
  MECHANISM_UNSPECIFIED = 0;
  ARTILLERY = 1;      // 砲擊
  BURN = 2;           // 燒燙傷
  FALL = 3;           // 墜落
  GRENADE = 4;        // 手榴彈
  GSW = 5;            // 槍傷
  IED = 6;            // 爆炸裝置
  LANDMINE = 7;       // 地雷
  MVC = 8;            // 車禍
  RPG = 9;            // 火箭彈
  OTHER = 10;         // 其他
}
// END: 更新受傷機制枚舉

enum InjuryLocation {
  INJURY_LOCATION_UNSPECIFIED = 0;
  HEAD = 1;
  NECK = 2;
  CHEST = 3;
  ABDOMEN = 4;
  LEFT_ARM = 5;
  RIGHT_ARM = 6;
  LEFT_LEG = 7;
  RIGHT_LEG = 8;
}

enum TreatmentType {
  TREATMENT_TYPE_UNSPECIFIED = 0;
  TOURNIQUET = 1;
  CHEST_SEAL = 2;
  NPA = 3;
  NEEDLE_DECOMPRESSION = 4;
  IV_IO = 5;
  MORPHINE = 6;
  ANTIBIOTICS = 7;
  HYPOTHERMIA_PREVENTION = 8;
}

enum EvacPriority {
  EVAC_PRIORITY_UNSPECIFIED = 0;
  URGENT = 1;
  PRIORITY = 2;
  ROUTINE = 3;
}

// 為了使用 google.protobuf.Timestamp，需要在編譯時引入
// import "google/protobuf/timestamp.proto";
